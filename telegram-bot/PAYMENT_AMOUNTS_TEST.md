# üí≥ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –°–£–ú–ú –ü–õ–ê–¢–ï–ñ–ï–ô

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2026-01-11
**–ó–∞–¥–∞—á–∞:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ —Å—É–º–º—ã –≤ Fondy (—Ç–µ–ø–µ—Ä—å –≤ —Ü–µ–Ω—Ç–∞—Ö)

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### Fondy (EUR)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
amount: 12  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: 12 —Ü–µ–Ω—Ç–æ–≤ = 0.12‚Ç¨
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
amount: 12 * 100 = 1200  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: 1200 —Ü–µ–Ω—Ç–æ–≤ = 12‚Ç¨
```

---

## üß™ –¢–ï–°–¢–û–í–´–ï –î–ê–ù–ù–´–ï

### –¢–∞–±–ª–∏—Ü–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å—É–º–º:

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | Fondy API (—Ü–µ–Ω—Ç—ã) | WayForPay API (–≥—Ä–Ω) |
|-------|------|-------------------|---------------------|
| 1 –º–µ—Å—è—Ü | 12‚Ç¨ / 600‚Ç¥ | 1200 | 600 |
| 3 –º–µ—Å—è—Ü–∞ | 30‚Ç¨ / 1500‚Ç¥ | 3000 | 1500 |
| 6 –º–µ—Å—è—Ü–µ–≤ | 55‚Ç¨ / 2800‚Ç¥ | 5500 | 2800 |

---

## üîç –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

### 1. –¢–µ—Å—Ç Fondy Request

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "1 –º–µ—Å—è—Ü - 12‚Ç¨":

```javascript
// bot.ts
const amount = getAmountByPlan('HOME_1_MONTH', 'EUR');
console.log('Amount from bot.ts:', amount); // ‚Üí 12

// fondy.service.ts
const payload = {
  amount: amount * 100,  // ‚Üí 1200
  currency: 'EUR'
};
console.log('Fondy API payload:', payload);
// ‚Üí { amount: 1200, currency: 'EUR' }
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ Fondy:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —Å—É–º–º—É: **12.00 EUR** ‚úÖ

---

### 2. –¢–µ—Å—Ç Fondy Webhook

–ö–æ–≥–¥–∞ Fondy –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç callback –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã:

```javascript
// –ü—Ä–∏–º–µ—Ä webhook payload –æ—Ç Fondy
{
  "order_status": "approved",
  "order_id": "fondy_123_1234567890",
  "amount": 1200,        // ‚úÖ –í —Ü–µ–Ω—Ç–∞—Ö
  "currency": "EUR",
  "signature": "..."
}

// fondy.webhook.ts
await db.markPaymentProcessed({
  amount: data.amount,  // ‚Üí 1200 (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ü–µ–Ω—Ç–∞—Ö)
  currency: 'EUR'
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î:**
```sql
SELECT * FROM Payment;
-- amount: 1200, currency: EUR ‚úÖ
```

---

### 3. –¢–µ—Å—Ç WayForPay Request

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "1 –º–µ—Å—è—Ü - 600‚Ç¥":

```javascript
// bot.ts
const amount = getAmountByPlan('HOME_1_MONTH', 'UAH');
console.log('Amount from bot.ts:', amount); // ‚Üí 600

// wayforpay.service.ts
const payload = {
  amount: 600,  // ‚úÖ –í –≥—Ä–∏–≤–Ω–∞—Ö (–Ω–µ –∫–æ–ø–µ–π–∫–∞—Ö)
  currency: 'UAH'
};
console.log('WayForPay API payload:', payload);
// ‚Üí { amount: 600, currency: 'UAH' }
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ WayForPay:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —Å—É–º–º—É: **600.00 UAH** ‚úÖ

---

## üìã CHECKLIST –ü–†–û–í–ï–†–ö–ò

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ production:

- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Fondy —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º
  - [ ] –¢–∞—Ä–∏—Ñ 1 –º–µ—Å—è—Ü (12‚Ç¨) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 12.00 EUR
  - [ ] –¢–∞—Ä–∏—Ñ 3 –º–µ—Å—è—Ü–∞ (30‚Ç¨) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 30.00 EUR
  - [ ] –¢–∞—Ä–∏—Ñ 6 –º–µ—Å—è—Ü–µ–≤ (55‚Ç¨) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 55.00 EUR

- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å WayForPay —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º
  - [ ] –¢–∞—Ä–∏—Ñ 1 –º–µ—Å—è—Ü (600‚Ç¥) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 600.00 UAH
  - [ ] –¢–∞—Ä–∏—Ñ 3 –º–µ—Å—è—Ü–∞ (1500‚Ç¥) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 1500.00 UAH
  - [ ] –¢–∞—Ä–∏—Ñ 6 –º–µ—Å—è—Ü–µ–≤ (2800‚Ç¥) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 2800.00 UAH

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook callbacks
  - [ ] Fondy –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç amount –≤ —Ü–µ–Ω—Ç–∞—Ö
  - [ ] WayForPay –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç amount –≤ –≥—Ä–∏–≤–Ω–∞—Ö
  - [ ] –°—É–º–º—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

---

## üêõ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê (–û–ë–ù–ê–†–£–ñ–ï–ù–ê)

### WayForPay –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∫–æ–ø–µ–π–∫–∏

**–í–∞–∂–Ω–æ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ WayForPay API –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å—É–º–º—É –≤ –∫–æ–ø–µ–π–∫–∞—Ö (–∫–∞–∫ Fondy).

–ï—Å–ª–∏ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—É–º–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ **6.00 UAH** –≤–º–µ—Å—Ç–æ **600.00 UAH**,
–∏—Å–ø—Ä–∞–≤—å—Ç–µ `wayforpay.service.ts`:

```typescript
// wayforpay.service.ts
const payload: any = {
  amount: amount * 100, // 600 ‚Üí 60000 –∫–æ–ø–µ–µ–∫
  currency: 'UAH',
  productPrice: [amount * 100],
  // ...
};
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é WayForPay** –ø–µ—Ä–µ–¥ production –¥–µ–ø–ª–æ–µ–º!

---

## üìö –°–°–´–õ–ö–ò

- [Fondy API Documentation](https://docs.fondy.eu/ru/docs/page/2/)
- [WayForPay API Documentation](https://wiki.wayforpay.com/)

---

## ‚úÖ –°–¢–ê–¢–£–° –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–ó–∞–¥–∞—á–∞ #3:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—É–º–º—É –¥–ª—è Fondy ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
1. `src/services/payment/fondy.service.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ `* 100`
2. `src/services/payment/wayforpay.service.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
3. `src/bot.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ü–µ–Ω–∞–º
4. `src/webhooks/fondy.webhook.ts` - –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ Fondy –∏ WayForPay!
